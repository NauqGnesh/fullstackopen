[{"/home/shepard_of_dark/Code/Web/fullstackopen/part2/phonebook/src/index.js":"1","/home/shepard_of_dark/Code/Web/fullstackopen/part2/phonebook/src/components/App.js":"2","/home/shepard_of_dark/Code/Web/fullstackopen/part2/phonebook/src/components/Page.js":"3","/home/shepard_of_dark/Code/Web/fullstackopen/part2/phonebook/src/services.js":"4"},{"size":225,"mtime":1608921591401,"results":"5","hashOfConfig":"6"},{"size":3104,"mtime":1609105073048,"results":"7","hashOfConfig":"6"},{"size":1666,"mtime":1608963374186,"results":"8","hashOfConfig":"6"},{"size":658,"mtime":1609105159036,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"12"},"12t51qk",{"filePath":"13","messages":"14","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"15","usedDeprecatedRules":"12"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"18","usedDeprecatedRules":"19"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22","usedDeprecatedRules":"12"},"/home/shepard_of_dark/Code/Web/fullstackopen/part2/phonebook/src/index.js",[],["23","24"],"/home/shepard_of_dark/Code/Web/fullstackopen/part2/phonebook/src/components/App.js",["25"],"import React, { useState, useEffect } from \"react\";\nimport Page from \"./Page\";\nimport personServices from \"../services\";\n\nconst App = () => {\n\tconst [persons, setPersons] = useState([]);\n\tconst [newName, setNewName] = useState(\"\");\n\tconst [newNumber, setNewNumber] = useState(\"\");\n\tconst [filter, setFilter] = useState(\"\");\n\tconst [error, setError] = useState(null);\n\tconst [success, setSuccess] = useState(false);\n\n\tuseEffect(() => {\n\t\tconsole.log(\"effect\");\n\t\tpersonServices.getAll().then((response) => {\n\t\t\tconsole.log(\"promise fulfilled\");\n\t\t\tsetPersons(response);\n\t\t\tconsole.log(persons);\n\t\t});\n\t}, []);\n\n\tconst handleNewInput = (type) => {\n\t\tswitch (type) {\n\t\t\tcase \"name\":\n\t\t\t\treturn (e) => setNewName(e.target.value);\n\t\t\tcase \"number\":\n\t\t\t\treturn (e) => setNewNumber(e.target.value);\n\t\t\tcase \"filter\":\n\t\t\t\treturn (e) => setFilter(e.target.value);\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"invalid argument\");\n\t\t}\n\t};\n\n\tconst createNewEntry = () => {\n\t\tconst obj = { name: newName, number: newNumber };\n\t\tpersonServices\n\t\t\t.create(obj)\n\t\t\t.then((response) => {\n\t\t\t\tsetPersons([...persons, response]);\n\t\t\t\tsetError(`Added ${obj.name}`);\n\t\t\t\tsetSuccess(true);\n\t\t\t})\n\t\t\t.catch((body) => {\n\t\t\t\tconsole.log(body.response.data);\n\t\t\t\tsetError(`${body.response.data.error}`);\n\t\t\t\tsetSuccess(false);\n\t\t\t});\n\t};\n\n\tconst resetState = () => {\n\t\tsetNewName(\"\");\n\t\tsetNewNumber(\"\");\n\t};\n\n\tconst handleNewPerson = (e) => {\n\t\te.preventDefault();\n\t\tconst filteredPersons = persons.filter((obj) => obj.name === newName);\n\t\tif (filteredPersons.length === 0) {\n\t\t\tcreateNewEntry();\n\t\t} else {\n\t\t\tconst p = filteredPersons[0];\n\t\t\tif (\n\t\t\t\twindow.confirm(\n\t\t\t\t\t`${newName} is already added to phonebook, replace the old number with a new one?`\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tpersonServices\n\t\t\t\t\t.update(p.id, { ...p, number: newNumber })\n\t\t\t\t\t.then((response) =>\n\t\t\t\t\t\tsetPersons(\n\t\t\t\t\t\t\tpersons.map((person) => (person.id !== p.id ? person : response))\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tsetError(`Updated contact details of ${p.name}`);\n\t\t\tsetSuccess(true);\n\t\t}\n\t\tresetState();\n\t};\n\n\tconst deleteHandler = (obj) => {\n\t\treturn () => {\n\t\t\tif (window.confirm(`Delete ${obj.name}`)) {\n\t\t\t\tlet flag = true;\n\t\t\t\tconsole.log(obj);\n\t\t\t\tpersonServices\n\t\t\t\t\t.remove(obj.id)\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t\tsetError(\"Person was already deleted\");\n\t\t\t\t\t\tsetSuccess(false);\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tif (flag) {\n\t\t\t\t\t\t\tsetPersons(persons.filter((p) => p.id !== obj.id));\n\t\t\t\t\t\t\tsetError(`Deleted ${obj.name}`);\n\t\t\t\t\t\t\tsetSuccess(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\n\tconst messageType = (message) => {\n\t\tconsole.log(success);\n\t\tif (success) {\n\t\t\treturn <div className={\"error success\"}>{message}</div>;\n\t\t}\n\n\t\treturn <div className=\"error\">{message}</div>;\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<Page\n\t\t\t\tnewName={newName}\n\t\t\t\tinputHandler={handleNewInput}\n\t\t\t\tbuttonHandler={handleNewPerson}\n\t\t\t\tdeleteHandler={deleteHandler}\n\t\t\t\tpersons={persons}\n\t\t\t\terrorMessage={error}\n\t\t\t\tmessageType={messageType}\n\t\t\t\tfilter={filter}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default App;\n","/home/shepard_of_dark/Code/Web/fullstackopen/part2/phonebook/src/components/Page.js",["26"],"import React from \"react\";\nimport personServices from \"../services\";\n\nconst Header = ({ text }) => <h2>{text}</h2>;\nconst Button = ({ text, handler }) => {\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={handler}>{text}</button>\n\t\t</div>\n\t);\n};\n\nconst Input = ({ text, value, handler }) => {\n\treturn (\n\t\t<div>\n\t\t\t{text}: <input value={value} onChange={handler} />\n\t\t</div>\n\t);\n};\n\nconst Entry = (props) => {\n\treturn (\n\t\t<div>\n\t\t\t{props.obj.name} {props.obj.number}\n\t\t\t<Button text=\"delete\" handler={props.deleteHandler(props.obj)} />\n\t\t</div>\n\t);\n};\n\nconst Form = (props) => {\n\treturn (\n\t\t<form>\n\t\t\t<Input\n\t\t\t\ttext=\"name\"\n\t\t\t\tvalue={props.newName}\n\t\t\t\thandler={props.inputHandler(\"name\")}\n\t\t\t/>\n\t\t\t<Input\n\t\t\t\ttext=\"number\"\n\t\t\t\tvalue={props.newNumber}\n\t\t\t\thandler={props.inputHandler(\"number\")}\n\t\t\t/>\n\t\t\t<Button text=\"add\" handler={props.buttonHandler} />\n\t\t</form>\n\t);\n};\n\nconst Notification = ({ message, type }) => {\n\tif (message === null) {\n\t\treturn null;\n\t}\n\n\treturn type(message);\n};\n\nconst Page = (props) => {\n\treturn (\n\t\t<div>\n\t\t\t<Header text=\"Phonebook\" />\n\t\t\t<Notification\n\t\t\t\tmessage={props.errorMessage}\n\t\t\t\ttype={props.messageType}\n\t\t\t/>\n\n\t\t\t<Input\n\t\t\t\ttext=\"filter shown with\"\n\t\t\t\tvalue={props.filter}\n\t\t\t\thandler={props.inputHandler(\"filter\")}\n\t\t\t/>\n\t\t\t<Header text=\"add a new\" />\n\t\t\t<Form\n\t\t\t\tnewName={props.newName}\n\t\t\t\tinputHandler={props.inputHandler}\n\t\t\t\tbuttonHandler={props.buttonHandler}\n\t\t\t/>\n\t\t\t<h2>Numbers</h2>\n\t\t\t{props.persons\n\t\t\t\t.filter((x) => new RegExp(props.filter, \"i\").test(x.name))\n\t\t\t\t.map((x) => (\n\t\t\t\t\t<Entry\n\t\t\t\t\t\tkey={x.name}\n\t\t\t\t\t\tobj={x}\n\t\t\t\t\t\tdeleteHandler={props.deleteHandler}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t</div>\n\t);\n};\n\nexport default Page;\n",["27","28"],"/home/shepard_of_dark/Code/Web/fullstackopen/part2/phonebook/src/services.js",["29"],"import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n\tconst request = axios.get(baseUrl);\n\treturn request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n\tconst request = axios.post(baseUrl, newObject);\n\treturn request.then((response) => {\n\t\treturn response.data;\n\t});\n};\n\nconst update = (id, newObject) => {\n\tconst request = axios.put(`${baseUrl}/${id}`, newObject);\n\treturn request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n\tconst request = axios.delete(`${baseUrl}/${id}`);\n\treturn request.then((response) => response.data);\n};\n\nexport default { getAll, create, update, remove };\n",{"ruleId":"30","replacedBy":"31"},{"ruleId":"32","replacedBy":"33"},{"ruleId":"34","severity":1,"message":"35","line":20,"column":5,"nodeType":"36","endLine":20,"endColumn":7,"suggestions":"37"},{"ruleId":"38","severity":1,"message":"39","line":2,"column":8,"nodeType":"40","messageId":"41","endLine":2,"endColumn":22},{"ruleId":"30","replacedBy":"42"},{"ruleId":"32","replacedBy":"43"},{"ruleId":"44","severity":1,"message":"45","line":26,"column":1,"nodeType":"46","endLine":26,"endColumn":51},"no-native-reassign",["47"],"no-negated-in-lhs",["48"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'persons'. Either include it or remove the dependency array.","ArrayExpression",["49"],"no-unused-vars","'personServices' is defined but never used.","Identifier","unusedVar",["47"],["48"],"import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","no-global-assign","no-unsafe-negation",{"desc":"50","fix":"51"},"Update the dependencies array to be: [persons]",{"range":"52","text":"53"},[604,606],"[persons]"]